(function(e){function n(n){for(var o,i,a=n[0],c=n[1],d=n[2],u=0,b=[];u<a.length;u++)i=a[u],s[i]&&b.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(n);while(b.length)b.shift()();return r.push.apply(r,d||[]),t()}function t(){for(var e,n=0;n<r.length;n++){for(var t=r[n],o=!0,a=1;a<t.length;a++){var c=t[a];0!==s[c]&&(o=!1)}o&&(r.splice(n--,1),e=i(i.s=t[0]))}return e}var o={},s={app:0},r=[];function i(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=o,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)i.d(t,o,function(n){return e[n]}.bind(null,o));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=n,a=a.slice();for(var d=0;d<a.length;d++)n(a[d]);var l=c;r.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},1:function(e,n){},2:function(e,n){},3:function(e,n){},4:function(e,n){},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var o=t("a026"),s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("web3-check",[t("div",[e.ready?t("Page"):t("div",[e._v("Initialization Robonomics")])],1)])],1)},r=[],i=t("0963"),a=t.n(i),c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("h1",[e._v("Market")]),t("div",[e._v("\n    Lighthouse:\n    "),t("a",{attrs:{href:"https://etherscan.io/address/"+e.lighthouse.address,target:"blank"}},[e._v(e._s(e.lighthouse.name))])]),t("div",[e._v("\n    Cost: "+e._s(e._f("fromWei")(e.price,9,"XRT"))+" |\n    Balance:\n    "),t("a",{attrs:{href:"https://etherscan.io/token/"+e.token+"?a="+e.account,target:"blank"}},[e._v(e._s(e._f("fromWei")(e.balance,9,"XRT")))]),e.price>0?t("span",[e._v("| Approved: "+e._s(e._f("fromWei")(e.approveTrade,9,"XRT")))]):e._e()]),e.price>0&&e.approveTrade<e.price?t("button",{attrs:{disabled:e.loadingApprove||e.balance<e.price},on:{click:e.approve}},[e._v("Approve")]):e._e(),e.approveTrade>=e.price?t("button",{on:{click:e.demand}},[e._v("demand")]):e._e(),e.approveTrade>=e.price?t("button",{on:{click:e.offer}},[e._v("offer")]):e._e(),e.liability.length>0?t("div",[t("h3",[e._v("Liability")]),e._l(e.liability,function(n,o){return t("div",{key:o,staticClass:"block"},[t("b",[e._v("liability:")]),t("a",{attrs:{href:"https://etherscan.io/address/"+n.address,target:"_blank"}},[e._v(e._s(n.address))]),t("br"),t("b",[e._v("lighthouse:")]),t("a",{attrs:{href:"https://etherscan.io/address/"+n.lighthouse,target:"_blank"}},[e._v(e._s(n.lighthouse))]),t("br"),t("b",[e._v("validator:")]),t("a",{attrs:{href:"https://etherscan.io/address/"+n.validator,target:"_blank"}},[e._v(e._s(n.validator))]),t("br"),t("b",[e._v("model:")]),e._v("\n      "+e._s(n.model)+"\n      "),t("br"),t("b",[e._v("objective:")]),e._v("\n      "+e._s(n.objective)+"\n      "),t("br"),t("b",[e._v("token:")]),e._v("\n      "+e._s(n.token)+"\n      "),t("br"),t("b",[e._v("cost:")]),e._v("\n      "+e._s(n.cost)+"\n      "),t("br"),t("b",[e._v("promisee:")]),e._v("\n      "+e._s(n.promisee)+"\n      "),t("br"),t("b",[e._v("promisor:")]),e._v("\n      "+e._s(n.promisor)+"\n      "),t("br"),""!=n.result?t("div",[t("b",[e._v("Results:")]),t("a",{attrs:{href:"https://ipfs.io/ipfs/"+n.result,target:"_blank"}},[e._v(e._s(n.result))]),!0===n.check?t("span",[e._v("+")]):t("span",[e._v("-")])]):e._e(),""==n.result?t("div",[t("b",[e._v("Results:")]),t("button",{on:{click:function(t){return e.result(n.address)}}},[e._v("send")])]):e._e()])})],2):e._e(),e.demands.length>0?t("div",[t("h3",[e._v("Demands")]),e._l(e.demands,function(n,o){return t("div",{key:o,staticClass:"block"},[t("b",[e._v("sender:")]),e._v("\n      "+e._s(n.sender)+"\n      "),t("br"),t("b",[e._v("validator:")]),e._v("\n      "+e._s(n.validator)+"\n      "),t("br"),t("b",[e._v("model:")]),e._v("\n      "+e._s(n.model)+"\n      "),t("br"),t("b",[e._v("objective:")]),e._v("\n      "+e._s(n.objective)+"\n      "),t("br"),t("b",[e._v("token:")]),e._v("\n      "+e._s(n.token)+"\n      "),t("br"),t("b",[e._v("cost:")]),e._v("\n      "+e._s(n.cost)+"\n      "),t("br"),t("b",[e._v("deadline:")]),e._v("\n      "+e._s(n.deadline)+"\n    ")])})],2):e._e(),e.offers.length>0?t("div",[t("h3",[e._v("Offers")]),e._l(e.offers,function(n,o){return t("div",{key:o,staticClass:"block"},[t("b",[e._v("sender:")]),e._v("\n      "+e._s(n.sender)+"\n      "),t("br"),t("b",[e._v("validator:")]),e._v("\n      "+e._s(n.validator)+"\n      "),t("br"),t("b",[e._v("model:")]),e._v("\n      "+e._s(n.model)+"\n      "),t("br"),t("b",[e._v("objective:")]),e._v("\n      "+e._s(n.objective)+"\n      "),t("br"),t("b",[e._v("token:")]),e._v("\n      "+e._s(n.token)+"\n      "),t("br"),t("b",[e._v("cost:")]),e._v("\n      "+e._s(n.cost)+"\n      "),t("br"),t("b",[e._v("deadline:")]),e._v("\n      "+e._s(n.deadline)+"\n    ")])})],2):e._e()])},d=[],l=(t("20d6"),t("cebc")),u=t("75fc"),b=(t("7514"),t("c5f6"),t("7f7f"),4451),f={version:5,ens:"0xaC4Ac4801b50b74aa3222B5Ba282FF54407B3941",ensSuffix:"sid",lighthouse:"airalab.lighthouse.5.robonomics.sid"},p="0x0000000000000000000000000000000000000000",v="QmUB6ajZTLLMZg7re1v4hw44aoG8HDQDHr9JyujU264Aw2",h="Qmbm3o2wkqseSEi5F69CPAuDrsKnrwTJ3HN5FVLPgLHKUm",_="QmRnbvYL4ehmVnuXQbB54ZvSzrrWRxVsBBx1gKbDKLd6dK",m=0,g={repo:"ipfs/robonomics",relay:{enabled:!0,hop:{enabled:!0}},EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star","/dns4/1.wsstar.aira.life/tcp/443/wss/p2p-websocket-star/","/dns4/2.wsstar.aira.life/tcp/443/wss/p2p-websocket-star/"]},Bootstrap:["/dns4/ams-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLer265NRgSp2LA3dPaeykiS1J6DifTC88f5uVQKNAd","/dns4/lon-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLMeWqB7YGVLJN3pNLQpmmEk35v6wYtsMGLzSr5QBU3","/dns4/nyc-1.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLueR4xBeUbY9WZ9xGUUxunbKWcrNFTDAadQJmocnWm","/dns4/nyc-2.bootstrap.libp2p.io/tcp/443/wss/ipfs/QmSoLV4Bbm51jM9C4gDYZQ9Cy3U6aXMJDAbzgu2fzaDs64","/dns4/node0.preload.ipfs.io/tcp/443/wss/ipfs/QmZMxNdpMkewiVZLMRxaNxUeZpDUb34pWjZ1kZvsd16Zic","/dns4/node1.preload.ipfs.io/tcp/443/wss/ipfs/Qmbut9Ywz9YEDrz8ySBSgWyJk41Uvm2QJPhwDJzJyGFsD6","/dns4/1.pubsub.aira.life/tcp/443/wss/ipfs/QmdfQmbmXt6sqjZyowxPUsmvBsgSGQjm4VXrV7WGy62dv8","/dns4/2.pubsub.aira.life/tcp/443/wss/ipfs/QmPTFt7GJ2MfDuVYwJJTULr6EnsQtGVp8ahYn9NSyoxmd9"]}},w={data:function(){return{lighthouse:{name:"",address:""},account:"",price:m,token:"",balance:0,approveTrade:0,loadingApprove:!1,liability:[],demands:[],offers:[],nonce:0}},mounted:function(){var e=this;this.lighthouse.name=this.$robonomics.lighthouse.name,this.lighthouse.address=this.$robonomics.lighthouse.address,this.account=this.$robonomics.account.address,this.token=this.$robonomics.xrt.address,this.$robonomics.factory.call.nonceOf(this.$robonomics.account.address).then(function(n){e.nonce=Number(n)}),this.$robonomics.onDemand(v,function(n){var t=e.demands.find(function(e){return e.signature===n.signature});t||(e.demands=[Object(l["a"])({},n)].concat(Object(u["a"])(e.demands.slice(0,10))))}),this.$robonomics.onOffer(v,function(n){var t=e.offers.find(function(e){return e.signature===n.signature});t||(e.offers=[Object(l["a"])({},n)].concat(Object(u["a"])(e.offers.slice(0,10))))}),this.$robonomics.onResult(function(n){e.setResult(n.liability,n.result,!1)}),this.$robonomics.onLiability(function(n,t){var o=e.liability.find(function(e){return e.address===t.address});o||(t.getInfo().then(function(n){e.liability=[Object(l["a"])({address:t.address,worker:t.worker},n)].concat(Object(u["a"])(e.liability))}),t.onResult().then(function(n){e.setResult(t.address,n,!0)}))}),this.fetchBalance()},methods:{fetchBalance:function(){var e=this;return this.$robonomics.xrt.call.balanceOf(this.$robonomics.account.address).then(function(n){return e.balance=n,n>0&&e.$robonomics.xrt.call.allowance(e.$robonomics.account.address,e.$robonomics.factory.address)}).then(function(n){n&&(e.approveTrade=n)})},approve:function(){var e=this;return this.loadingApprove=!0,this.$robonomics.xrt.send.approve(this.$robonomics.factory.address,this.price,{from:this.$robonomics.account.address}).then(function(){return e.loadingApprove=!1,e.fetchBalance()}).catch(function(){e.loadingApprove=!1})},setResult:function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=this.liability.findIndex(function(n){return n.address===e});s>=0&&o["a"].set(this.liability,s,Object(l["a"])({},this.liability[s],{result:n,check:t}))},demand:function(){var e=this;this.$robonomics.web3.eth.getBlock("latest",function(n,t){var o={model:v,objective:h,token:e.$robonomics.xrt.address,cost:e.price,lighthouse:e.$robonomics.lighthouse.address,validator:p,validatorFee:0,deadline:t.number+1e3,nonce:e.nonce};e.nonce++,e.$robonomics.sendDemand(o)})},offer:function(){var e=this;this.$robonomics.web3.eth.getBlock("latest",function(n,t){var o={model:v,objective:h,token:e.$robonomics.xrt.address,cost:e.price,lighthouse:e.$robonomics.lighthouse.address,validator:p,lighthouseFee:0,deadline:t.number+1e3,nonce:e.nonce};e.nonce++,e.$robonomics.sendOffer(o)})},result:function(e){this.$robonomics.sendResult({liability:e,success:!0,result:_})}}},y=w,k=(t("f321"),t("2877")),$=Object(k["a"])(y,c,d,!1,null,null,null),j=$.exports,x=t("4aac"),O=t.n(x),S=null,T=function(e){return S=new O.a({web3:web3,account:{address:web3.eth.accounts[0]},ens:{address:f.ens,suffix:f.ensSuffix,version:f.version},messageProvider:new x["MessageProviderIpfs"](e),lighthouse:f.lighthouse}),S},Q=t("f684"),B=t.n(Q),L=null,A=function(){if(null!==L)return B.a.resolve(L);var e=function(e,n){L=new Ipfs(g),L.once("ready",function(){return L.id(function(t,o){if(t)return n(t);console.log("ipfs id "+o.id),window.ipfs=L,e(L)})})},n=function(n,t){e(n,t)};return"complete"!==document.readyState?new B.a(function(e,t){window.addEventListener("load",function(){n(e,t)})}):new B.a(function(e,t){n(e,t)})},D=A,P={name:"app",components:{Page:j},data:function(){return{ready:!1}},mounted:function(){var e=this;a.a.store.on("load",function(){D().then(function(n){o["a"].prototype.$robonomics=T(n),e.$robonomics.ready().then(function(){e.ready=!0})})})}},R=P,N=Object(k["a"])(R,s,r,!1,null,null,null),M=N.exports,U=function(e,n){var t=new web3.BigNumber(e);return t.shift(-n).toNumber()},J=function(e,n,t){return"".concat(U(e,n)," ").concat(t)};o["a"].config.productionTip=!1,a.a.store.on("update",function(e){(null!==e.state.old.account&&e.action===i["ACTIONS"].UPD_ACCOUNT||null!==e.state.old.networkId&&e.action===i["ACTIONS"].UPD_NETWORK_ID)&&window.location.reload(!1)}),o["a"].use(a.a,{Web3:Web3,networks:[b],requireAccount:!0}),o["a"].filter("fromWei",J),new o["a"]({render:function(e){return e(M)}}).$mount("#app")},"655a":function(e,n,t){},f321:function(e,n,t){"use strict";var o=t("655a"),s=t.n(o);s.a}});
//# sourceMappingURL=app.82277157.js.map